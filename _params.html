<!-- HTML header for doxygen 1.8.13-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>HIFIR: Control Parameters</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="customdoxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">HIFIR
   &#160;<span id="projectnumber">0.1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('_params.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Control Parameters </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#_params_basic">Essential Parameters</a></li>
<li class="level1"><a href="#_params_system">System Parameters</a></li>
<li class="level1"><a href="#_params_adv">Advanced Parameters</a></li>
<li class="level1"><a href="#_params_pre">Preprocessing Parameters</a></li>
</ul>
</div>
<div class="textblock"><p><a name="aparameters"></a></p>
<p>In this section, we discuss control parameters in HIFIR package. To create an instance of parameter structure, use the following</p>
<div class="fragment"><div class="line"><span class="keyword">auto</span> params = <a class="code" href="group__itr.html#ga43f29591bddf7167da6ffd7f1ce485c6">hif::get_default_params</a>();</div></div><!-- fragment --><p>or equivalently</p>
<div class="fragment"><div class="line"><span class="keyword">auto</span> params = <a class="code" href="group__itr.html#ga7ed4cd402b23fc39e99f7182ac6f6ae8">hif::DEFAULT_PARAMS</a>;</div></div><!-- fragment --><p>The instance <em>params</em> is a C++ structure whose fields are different control parameters for computing HIF preconditioners. In the following, we will address commonly-used parameters categorized in different groups.</p>
<h1><a class="anchor" id="_params_basic"></a>
Essential Parameters</h1>
<p>We summary several essential control parameters used in HIF.</p>
<ul>
<li><a class="el" href="structhif__Options.html#aa15ece2aca590a228a14577e2ec22762">hif::Params::tau_L</a> and <a class="el" href="structhif__Options.html#a7e9b4bfbf1ccab9779ada82a2f1cb657">hif::Params::tau_U</a> are <em>drop tolerance</em> (or <em>droptol</em> or <img class="formulaInl" alt="$\tau$" src="form_64.png"/>in short) for L and U factors during fan-in (aka Crout-version) ILUs, respectively. The default values are 1e-4 for robustness. For most PDE-based systems (i.e., nearly (pattern) symmetric systems), then can be increased to 1e-2. In general, we recommend <img class="formulaInl" alt="$\tau\in [10^{-4},10^{-2}]$" src="form_65.png"/>.</li>
<li><a class="el" href="structhif__Options.html#af5f447fb5e228e1a80e23489d55ce28d">hif::Params::alpha_L</a> and <a class="el" href="structhif__Options.html#a167b091fcf736af753fb249c5ddfebb2">hif::Params::alpha_U</a> are <em>fill-in factors</em> for <em>scalability-oriented dropping</em> for L and U, respectively. The default values are 10 for robustness. For 3D PDE systems, <img class="formulaInl" alt="$\alpha=3$" src="form_66.png"/> usually works very well. For 2D PDE systems, <img class="formulaInl" alt="$\alpha=5$" src="form_67.png"/> works well. In general, we recommend <img class="formulaInl" alt="$\alpha\in [2,20]$" src="form_68.png"/>.</li>
<li><a class="el" href="structhif__Options.html#abe6d7b173d16dd835529059613ba6600">hif::Params::kappa_d</a> and <a class="el" href="structhif__Options.html#a8ff00f5883feebf9df4b6f75691ff8b7">hif::Params::kappa</a> are <em>conditioning</em> <em>thresholds</em> for D and L/U factors, respectively. Their default values are 3, which can be enlarged to 5 for efficiency for most PDE-based systems, i.e., <img class="formulaInl" alt="$\kappa\in [3,5]$" src="form_69.png"/>.</li>
<li><a class="el" href="structhif__Options.html#a093018bef6fb884957c5a4e77b403082">hif::Params::dense_thres</a> controls the final Schur complement size, which by default is 2000. Note that the final Schur complement may be larger than this threshold, but it plays the most important role in determing the final Schur complement sizes. The default value 2000 is for robustness, especially for highly assymetric ill-conditioned systems. In general, 500 is sufficient for most PDE-based systems.</li>
</ul>
<p>In summary, for relatively well-posed PDE-based systems, we recommend the following settings</p>
<div class="fragment"><div class="line"><span class="keyword">auto</span> params = <a class="code" href="group__itr.html#ga7ed4cd402b23fc39e99f7182ac6f6ae8">hif::DEFAULT_PARAMS</a>;</div><div class="line">params.<a class="code" href="structhif__Options.html#aa15ece2aca590a228a14577e2ec22762">tau_L</a> = params.tau_U = 1e-2; <span class="comment">// droptol</span></div><div class="line">params.alpha_L = params.alpha_U = 3; <span class="comment">// fill-in factor</span></div><div class="line">params.kappa_d = params.kappa = 5; <span class="comment">// conditioning</span></div><div class="line">params.dense_thres = 500;</div></div><!-- fragment --><h1><a class="anchor" id="_params_system"></a>
System Parameters</h1>
<ul>
<li><a class="el" href="structhif__Options.html#a39fc492d8eaf5146f9c7435343867b77">hif::Params::verbose</a> controls the verbose levels during factorizations. By default, <a class="el" href="group__itr.html#gga09a44f290ae079e82cc71535480c9503a27db06dd416547dc9be5c8547f1dfc53">hif::VERBOSE_INFO</a> is enabled. A new level can be enabled via bit-wise add options, e.g., <code>params.verbose |= <a class="el" href="group__itr.html#gga09a44f290ae079e82cc71535480c9503a5d89c47228ebb5c432d13816c0336dcc">hif::VERBOSE_PRE</a></code> also enables verbose information for preprocessing steps. To disbale verbose printing, set the verbose level to <a class="el" href="group__itr.html#gga09a44f290ae079e82cc71535480c9503ad8e28a63c3dca3c48f225ce12151b4aa">hif::VERBOSE_NONE</a>.</li>
<li><a class="el" href="structhif__Options.html#ab4df6f0682c93748fce8e510d54205c9">hif::Params::threads</a> controls the parallel threads for computing Schur complements. The default value is 0, which inherits the setting from the system via envrionment variable <code>OMP_NUM_THREADS</code> or function <code>omp_get_max_threads</code>.</li>
</ul>
<h1><a class="anchor" id="_params_adv"></a>
Advanced Parameters</h1>
<p>In this section, we address some advanced parameters, which may become useful.</p>
<ul>
<li><a class="el" href="structhif__Options.html#aca61bf41d458b30574539bff56a63878">hif::Params::rrqr_cond</a> controls the condition number threshold for truncating QRCP for the final Schur complement. The default value is <img class="formulaInl" alt="$\epsilon_{\textrm{mach}}^{-2/3}$" src="form_70.png"/>. For some extremely ill-conditioned but not singular systems, we may need to enlarge it.</li>
<li><a class="el" href="structhif__Options.html#ab487c07ba14edc0d0dc3014e8364688f">hif::Params::beta</a> is the safeguard for preventing abnormally large or small scaling factors from equilibration. The default value is 1000.</li>
<li><a class="el" href="structhif__Options.html#a581fc8da3ae4419119da928a3e102ee2">hif::Params::pivot</a> controls the dynamic pivoting strategies. By default, it is set to be <a class="el" href="group__itr.html#ggab3d34a70bc837bc30a9d1c743416e8baa5a5f640db08538f0aae2605f908d20a5">hif::PIVOTING_AUTO</a>, which automatically switches to use inverse-based rook pivoting in fan-in ILUs for the coarse levels if necessary. To enforce using or disable rook pivoting, use <a class="el" href="group__itr.html#ggab3d34a70bc837bc30a9d1c743416e8baa7a23aa2995cbeb896e9a530dc005b97f">hif::PIVOTING_ON</a> and <a class="el" href="group__itr.html#ggab3d34a70bc837bc30a9d1c743416e8baa78c70c1ee676d1531a9bcefa8853025c">hif::PIVOTING_OFF</a>, respectively.</li>
</ul>
<h1><a class="anchor" id="_params_pre"></a>
Preprocessing Parameters</h1>
<ul>
<li><a class="el" href="structhif__Options.html#af0877e037535ef18bd53d1045774d1a1">hif::Params::reorder</a> is for choosing different fill-reduction reordering schemes, and we use AMD (<a class="el" href="group__itr.html#gga7e973856e6835495a381a60b1dad0b27a8cc51020597e0e6aebbe1ceccd289f5d">hif::REORDER_AMD</a>) by default for its robustness. Other options <a class="el" href="group__itr.html#gga7e973856e6835495a381a60b1dad0b27aba4e6814b3c3a4cc08d1d6772e65bf84">hif::REORDER_RCM</a> and <a class="el" href="group__itr.html#gga7e973856e6835495a381a60b1dad0b27a63e0b4363d776a1f187d8edf8494ba64">hif::REORDER_AUTO</a> are available.</li>
<li><a class="el" href="structhif__Options.html#a99619c3c7df09b5369efc7980408f85e">hif::Params::symm_pre_lvls</a> controls number of levels for performing symmetric preprocessing. Let <img class="formulaInl" alt="$ T=\textrm{symm\_pre\_lvls}$" src="form_71.png"/>. If <img class="formulaInl" alt="$ T\ge 0$" src="form_72.png"/>, then we always perform exactly <img class="formulaInl" alt="$ T$" src="form_73.png"/> levels of symmetric preprocessing. If <img class="formulaInl" alt="$ T&lt;0$" src="form_74.png"/>, then we perform <b>at most</b> <img class="formulaInl" alt="$\vert T\vert$" src="form_75.png"/> levels of symmetric preprocessing. For the latter, in particular, if the inputs of all levels are nearly pattern symmetric, then symmetric preprocessing is used for these levels. As far as "near pattern symmetry," the following parameter is used to control it. By default, <img class="formulaInl" alt="$ T=-2$" src="form_76.png"/>.</li>
<li><a class="el" href="structhif__Options.html#aba342b97dbfcac8dc454aa8791cc88e6">hif::Params::nzp_thres</a> controls the nonzero pattern (nzp) symmetry threshold, which is then used to determine near pattern symmetry. By default, it is 0.65, i.e., if 65% entries are pattern symmetric, then a symmetric preprocessing is used. Note that this parameter is only used if symm_pre_lvls is negative. </li>
</ul>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.13-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
